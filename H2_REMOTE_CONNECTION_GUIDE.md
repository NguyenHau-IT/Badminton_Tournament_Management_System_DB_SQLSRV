# ğŸ”’ HÆ°á»›ng dáº«n káº¿t ná»‘i H2 TCP Server tá»« mÃ¡y cÃ¹ng máº¡ng LAN

## ğŸ¯ Tá»•ng quan
H2 TCP Server cho phÃ©p **CHá»ˆ cÃ¡c mÃ¡y trong cÃ¹ng máº¡ng LAN** káº¿t ná»‘i Ä‘áº¿n database cá»§a á»©ng dá»¥ng BTMS qua TCP.

## ğŸ›¡ï¸ Báº£o máº­t
- âœ… Server chá»‰ bind to IP LAN cá»¥ thá»ƒ (khÃ´ng pháº£i 0.0.0.0)
- âœ… Chá»‰ mÃ¡y trong cÃ¹ng máº¡ng LAN cÃ³ thá»ƒ káº¿t ná»‘i
- âœ… KhÃ´ng thá»ƒ truy cáº­p tá»« internet hoáº·c máº¡ng khÃ¡c
- âœ… Báº£o vá»‡ khá»i cÃ¡c káº¿t ná»‘i khÃ´ng mong muá»‘n tá»« bÃªn ngoÃ i

## âš™ï¸ Cáº¥u hÃ¬nh Server (MÃ¡y cháº¡y BTMS)

### 1. Khá»Ÿi Ä‘á»™ng H2 TCP Server
- H2 Server tá»± Ä‘á»™ng khá»Ÿi Ä‘á»™ng khi cháº¡y BTMS
- Server bind to **IP LAN cá»¥ thá»ƒ** trÃªn port **9092**
- Remote access **CHá»ˆ cho mÃ¡y cÃ¹ng máº¡ng LAN** vá»›i `-tcpAllowOthers`

### 2. Má»Ÿ port Firewall
```batch
# Cháº¡y vá»›i quyá»n Administrator:
netsh advfirewall firewall add rule name="H2 TCP Server - BTMS" dir=in action=allow protocol=TCP localport=9092
```

Hoáº·c cháº¡y file: `enable-h2-firewall.bat`

### 3. Kiá»ƒm tra IP mÃ¡y server
```cmd
ipconfig | findstr "IPv4"
```
VÃ­ dá»¥ IP: `192.168.1.100`

## ğŸ”Œ Káº¿t ná»‘i tá»« mÃ¡y khÃ¡c

### Connection String
```
jdbc:h2:tcp://[IP_SERVER]:9092/badminton_tournament
```

**VÃ­ dá»¥ cá»¥ thá»ƒ:**
```
jdbc:h2:tcp://192.168.1.100:9092/badminton_tournament
Username: sa  
Password: (Ä‘á»ƒ trá»‘ng)
```

### Káº¿t ná»‘i báº±ng H2 Console (Web)
1. Má»Ÿ trÃ¬nh duyá»‡t trÃªn mÃ¡y client
2. Truy cáº­p: `http://localhost:8082` (náº¿u cÃ³ H2 Console)
3. Nháº­p connection string á»Ÿ trÃªn

### Káº¿t ná»‘i báº±ng cÃ´ng cá»¥ DB khÃ¡c
- **DBeaver**: New Connection â†’ H2 â†’ TCP
- **IntelliJ IDEA**: Database Tool â†’ H2 â†’ TCP  
- **Eclipse**: Data Source Explorer â†’ H2

## âœ… Kiá»ƒm tra káº¿t ná»‘i

### Tá»« mÃ¡y Server (BTMS)
- Nháº¥p vÃ o **H2: âœ“ Port 9092** trÃªn status bar
- Xem thÃ´ng tin chi tiáº¿t vá» server vÃ  connection URLs

### Tá»« mÃ¡y Client  
```bash
# Test káº¿t ná»‘i báº±ng telnet
telnet [IP_SERVER] 9092
```

## ğŸš¨ Xá»­ lÃ½ sá»± cá»‘

### 1. KhÃ´ng káº¿t ná»‘i Ä‘Æ°á»£c
**NguyÃªn nhÃ¢n phá»• biáº¿n:**
- âŒ Firewall cháº·n port 9092
- âŒ Sá»­ dá»¥ng sai IP (127.0.0.1 thay vÃ¬ IP thá»±c)
- âŒ H2 Server chÆ°a khá»Ÿi Ä‘á»™ng
- âŒ MÃ¡y **KHÃ”NG CÃ™NG máº¡ng LAN** (bá»‹ cháº·n bá»Ÿi báº£o máº­t)
- âŒ MÃ¡y client á»Ÿ máº¡ng con khÃ¡c (VPN, subnet khÃ¡c)

**Giáº£i phÃ¡p:**
1. **Kiá»ƒm tra cÃ¹ng máº¡ng LAN:** Äáº£m báº£o cáº£ 2 mÃ¡y cÃ¹ng dáº£i IP (vd: 192.168.1.x)
2. Cháº¡y `enable-h2-firewall.bat` vá»›i quyá»n Admin
3. DÃ¹ng IP thá»±c cá»§a mÃ¡y server (khÃ´ng pháº£i localhost)
4. Kiá»ƒm tra H2 status trÃªn BTMS: **H2: âœ“ Port 9092**
5. Ping test: `ping [IP_SERVER]`
6. Kiá»ƒm tra subnet mask: `ipconfig /all`

### 2. Connection timeout
- Kiá»ƒm tra network stability
- Thá»­ káº¿t ná»‘i tá»« mÃ¡y khÃ¡c cÃ¹ng máº¡ng
- Restart H2 Server (restart BTMS)

### 3. Database khÃ´ng tá»“n táº¡i
- Database sáº½ Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng khi káº¿t ná»‘i láº§n Ä‘áº§u
- Äáº£m báº£o thÆ° má»¥c `database/` cÃ³ quyá»n ghi

## ğŸ“‹ ThÃ´ng tin ká»¹ thuáº­t

| ThÃ´ng sá»‘ | GiÃ¡ trá»‹ |
|----------|---------|
| **Port** | 9092 |
| **Bind Address** | LAN IP cá»¥ thá»ƒ (khÃ´ng pháº£i 0.0.0.0) |
| **Network Access** | **CHá»ˆ mÃ¡y cÃ¹ng máº¡ng LAN** |
| **Database Path** | `./database/badminton_tournament` |
| **Username** | `sa` |
| **Password** | *(empty)* |
| **Allow Others** | âœ… Enabled (cÃ¹ng LAN only) |
| **Auto-create DB** | âœ… Enabled |

## ğŸ” Báº£o máº­t

### âœ… TÃ­nh nÄƒng báº£o máº­t Ä‘Ã£ Ä‘Æ°á»£c tÃ­ch há»£p:
- **LAN-only binding:** Server chá»‰ bind to IP LAN cá»¥ thá»ƒ, khÃ´ng pháº£i 0.0.0.0
- **Network isolation:** Chá»‰ mÃ¡y trong cÃ¹ng subnet cÃ³ thá»ƒ káº¿t ná»‘i
- **No internet exposure:** KhÃ´ng thá»ƒ truy cáº­p tá»« máº¡ng external
- **Controlled access:** NgÄƒn cháº·n cÃ¡c káº¿t ná»‘i khÃ´ng mong muá»‘n

### Khuyáº¿n nghá»‹ bá»• sung:
- Monitor connections thÃ´ng qua BTMS status bar
- CÃ¢n nháº¯c Ä‘áº·t password cho user `sa` trong mÃ´i trÆ°á»ng production
- Regular backup database files

### Trong mÃ´i trÆ°á»ng production:
- Sá»­ dá»¥ng database server chuyÃªn dá»¥ng (SQL Server, PostgreSQL)
- Cáº¥u hÃ¬nh SSL/TLS encryption
- Implement proper authentication & authorization

---
*Generated by BTMS H2 TCP Server Config*