# ğŸ“Š BÃO CÃO CÃ”NG NGHá»† VÃ€ TÃNH NÄ‚NG Â· v2

Há»‡ thá»‘ng Quáº£n lÃ½ Äa sÃ¢n Cáº§u lÃ´ng (Badminton Tech / BTMS)

---

## ğŸ“‘ Má»¥c lá»¥c

### ğŸ¯ Tá»”NG QUAN Há»† THá»NG
- [ğŸ“‹ ThÃ´ng tin tá»•ng quan](#-thÃ´ng-tin-tá»•ng-quan)
- [ğŸ¯ Má»¥c tiÃªu & pháº¡m vi](#-má»¥c-tiÃªu--pháº¡m-vi)

### ğŸ—ï¸ KIáº¾N TRÃšC & CÃ”NG NGHá»†  
- [ğŸ—ï¸ Kiáº¿n trÃºc há»‡ thá»‘ng](#ï¸-kiáº¿n-trÃºc-há»‡-thá»‘ng)
- [ğŸ’» CÃ´ng nghá»‡ chÃ­nh (Tech stack)](#-cÃ´ng-nghá»‡-chÃ­nh-tech-stack)
- [âš™ï¸ Cáº¥u hÃ¬nh máº·c Ä‘á»‹nh quan trá»ng](#ï¸-cáº¥u-hÃ¬nh-máº·c-Ä‘á»‹nh-quan-trá»ng)

### ğŸš€ TÃNH NÄ‚NG HIá»†N Táº I
- [ğŸ§­ Äiá»u hÆ°á»›ng & mÃ n hÃ¬nh chÃ­nh (Desktop)](#-Ä‘iá»u-hÆ°á»›ng--mÃ n-hÃ¬nh-chÃ­nh-desktop)
- [ğŸŸï¸ Quáº£n lÃ½ Ä‘a sÃ¢n & Ä‘iá»u khiá»ƒn tráº­n Ä‘áº¥u](#ï¸-quáº£n-lÃ½-Ä‘a-sÃ¢n--Ä‘iá»u-khiá»ƒn-tráº­n-Ä‘áº¥u)
- [ğŸŒ Web interface & PIN flow](#-web-interface--pin-flow)
- [ğŸ”Œ REST API & SSE](#-rest-api--sse)
- [ğŸ—ƒï¸ CÃ¡c mÃ´-Ä‘un dá»¯ liá»‡u/ghi nháº­t kÃ½](#ï¸-cÃ¡c-mÃ´-Ä‘un-dá»¯-liá»‡ughi-nháº­t-kÃ½-trÃ­ch-yáº¿u)

### ğŸ”® Káº¾ HOáº CH TÆ¯Æ NG LAI
- [ğŸ”® PhÃ¡t tháº£o tÃ­nh nÄƒng dá»± kiáº¿n](#-phÃ¡t-tháº£o-tÃ­nh-nÄƒng-dá»±-kiáº¿n)
- [ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng sÆ¡ bá»™](#-luá»“ng-hoáº¡t-Ä‘á»™ng-sÆ¡-bá»™)

### ğŸ”§ Váº¬N HÃ€NH & Báº¢O TRÃŒ
- [ğŸ§ª Kiá»ƒm thá»­ & giÃ¡m sÃ¡t](#-kiá»ƒm-thá»­--giÃ¡m-sÃ¡t)
- [ğŸ”’ Báº£o máº­t & quyá»n truy cáº­p](#-báº£o-máº­t--quyá»n-truy-cáº­p)
- [âš¡ Hiá»‡u nÄƒng & tá»‘i Æ°u](#-hiá»‡u-nÄƒng--tá»‘i-Æ°u)
- [ğŸ“¦ ÄÃ³ng gÃ³i & cÃ i Ä‘áº·t (Windows MSI)](#-Ä‘Ã³ng-gÃ³i--cÃ i-Ä‘áº·t-windows-msi)
- [ğŸ§­ HÆ°á»›ng dáº«n váº­n hÃ nh nhanh](#-hÆ°á»›ng-dáº«n-váº­n-hÃ nh-nhanh)

---

## ğŸ¯ Tá»”NG QUAN Há»† THá»NG

### ğŸ“‹ ThÃ´ng tin tá»•ng quan
- **TÃªn dá»± Ã¡n**: Badminton Tech (BT) Â· Badminton Tournament Management System (BTMS)
- **PhiÃªn báº£n hiá»‡n táº¡i**: 2.0.0
- **NhÃ  phÃ¡t triá»ƒn**: Nguyen Viet Hau
- **Kiá»ƒu á»©ng dá»¥ng**: Desktop (Java Swing) + Web (Spring Boot + Thymeleaf)
- **Há»‡ Ä‘iá»u hÃ nh má»¥c tiÃªu**: Windows 10/11 64-bit
- **Cá»•ng dá»‹ch vá»¥ máº·c Ä‘á»‹nh**: 2345 (0.0.0.0:2345)

### ğŸ¯ Má»¥c tiÃªu & pháº¡m vi
- Váº­n hÃ nh giáº£i cáº§u lÃ´ng vá»›i nhiá»u sÃ¢n thi Ä‘áº¥u Ä‘á»“ng thá»i trÃªn cÃ¹ng 1 mÃ¡y.
- Äiá»u khiá»ƒn tráº­n Ä‘áº¥u trá»±c tiáº¿p tá»« desktop app; há»— trá»£ Ä‘iá»u khiá»ƒn tá»« xa qua trÃ¬nh duyá»‡t (di Ä‘á»™ng/tablet/PC) báº±ng mÃ£ PIN.
- Theo dÃµi, giÃ¡m sÃ¡t, vÃ  Ä‘á»“ng bá»™ tráº¡ng thÃ¡i cÃ¡c sÃ¢n theo thá»i gian thá»±c (real-time).
- Quáº£n lÃ½ danh má»¥c dá»¯ liá»‡u giáº£i Ä‘áº¥u: ná»™i dung thi Ä‘áº¥u, cÃ¢u láº¡c bá»™, Ä‘Äƒng kÃ½ theo giáº£i,â€¦
- ÄÃ³ng gÃ³i phÃ¡t hÃ nh dáº¡ng bá»™ cÃ i MSI cho Windows (tá»± Ä‘á»™ng cÃ i Ä‘áº·t JRE kÃ¨m á»©ng dá»¥ng).

---

## ğŸ—ï¸ KIáº¾N TRÃšC & CÃ”NG NGHá»†

### ğŸ—ï¸ Kiáº¿n trÃºc há»‡ thá»‘ng
```
Java Swing Desktop (MainFrame, cÃ¡c Panel quáº£n trá»‹)
        â”‚
        â”‚ IPC/Service ná»™i bá»™
        â–¼
Spring Boot (Web + REST API + SSE)  â†â†’  SQL Server (JDBC/Hikari/JPA)
        â”‚
  â”œâ”€â”€ Thymeleaf view (/pin, /scoreboard/{pin}) + Static (CSS/JS)
  â””â”€â”€ REST API (/api/court/**, /api/scoreboard/**) + SSE stream
```

**Äáº·c Ä‘iá»ƒm:**
- á»¨ng dá»¥ng desktop vÃ  dá»‹ch vá»¥ web Ä‘á»“ng quy trÃ¬nh (fat-jar Spring Boot, má»Ÿ Swing UI trong JVM khÃ´ng headless).
- Giao tiáº¿p real-time qua SSE (Server-Sent Events) vÃ /hoáº·c polling dá»± phÃ²ng.
- á»¨ng dá»¥ng web cháº¡y trÃªn LAN (0.0.0.0:2345) Ä‘á»ƒ thiáº¿t bá»‹ khÃ¡c (Ä‘iá»‡n thoáº¡i/tablet) truy cáº­p.

### ğŸ’» CÃ´ng nghá»‡ chÃ­nh (Tech stack)

#### Runtime & ná»n táº£ng
- **Java 17** (maven.compiler.release=17)
- **Spring Boot 3.2.6** (parent)
- **Desktop UI**: Java Swing + FlatLaf 3.4 (flatlaf, flatlaf-extras)

#### Web & API
- **Web Framework**: Spring Web MVC + Thymeleaf 3.1
- **Real-time**: Server-Sent Events (SSE)
- **Static resources**: CSS/JS cho responsive UI

#### CSDL & dá»¯ liá»‡u
- **Primary DB**: SQL Server (SQL Server JDBC Driver 12.6.1)
- **Connection Pool**: HikariCP (spring-boot-starter-data-jpa)
- **ORM**: Hibernate/JPA

#### ThÆ° viá»‡n bá»• trá»£
- **Logging**: SLF4J + Logback
- **Utilities**: Apache Commons, Jackson JSON
- **Desktop**: System tray, file dialogs
- **Network**: H2 TCP Server cho remote access

#### Build & phÃ¡t hÃ nh
- **Build Tool**: Maven 3.x
- **Packaging**: maven-jpackage-plugin
- **Target**: Windows MSI vá»›i runtime JRE bundle
- **Testing**: JUnit, Spring Boot Test

### âš™ï¸ Cáº¥u hÃ¬nh máº·c Ä‘á»‹nh quan trá»ng

#### Spring Boot Properties (application.properties)
```properties
# Server config
server.port=2345
server.address=0.0.0.0

# Database connection
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=BadmintonDB;encrypt=false
spring.datasource.username=sa
spring.datasource.password=yourpassword
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect

# Web config  
spring.web.resources.static-locations=classpath:/static/
spring.thymeleaf.cache=false
```

#### H2 TCP Server
- **Port**: 9092 (máº·c Ä‘á»‹nh)
- **Bind address**: 0.0.0.0 (táº¥t cáº£ interfaces)
- **Auto-start**: Tá»± Ä‘á»™ng khá»Ÿi Ä‘á»™ng cÃ¹ng á»©ng dá»¥ng
- **Remote access**: Cho phÃ©p káº¿t ná»‘i tá»« mÃ¡y khÃ¡c

#### Network Interface
- **IPv4 Only**: Chá»‰ cháº¥p nháº­n IPv4, lá»c bá» IPv6
- **Interface selection**: Dialog chá»n network interface khi khá»Ÿi Ä‘á»™ng
- **Fallback**: Sá»­ dá»¥ng localhost náº¿u khÃ´ng chá»n Ä‘Æ°á»£c interface

---

## ğŸš€ TÃNH NÄ‚NG HIá»†N Táº I

### ğŸ§­ Äiá»u hÆ°á»›ng & mÃ n hÃ¬nh chÃ­nh (Desktop)

#### MainFrame (JFrame chÃ­nh)
- **Menu bar**: File, Settings, Tools, Help
- **Tab panels**: 
  - "SÃ¢n thi Ä‘áº¥u" (BadmintonControlPanel) - Quáº£n lÃ½ cÃ¡c sÃ¢n
  - "Giáº£i Ä‘áº¥u" (TournamentPanel) - Quáº£n lÃ½ tournament data
  - "GiÃ¡m sÃ¡t" (MonitorTab) - Theo dÃµi tá»•ng thá»ƒ
  - "Káº¿t quáº£ Ä‘Ã£ thi Ä‘áº¥u" (HistoryTab) - Lá»‹ch sá»­ vÃ  snapshot

#### System Tray Integration
- **Minimize to tray**: Thu nhá» xuá»‘ng system tray
- **Quick actions**: Show/Hide, Exit tá»« context menu
- **Status indicators**: Icon thay Ä‘á»•i theo tráº¡ng thÃ¡i hoáº¡t Ä‘á»™ng

#### Network Interface Chooser
- **Startup dialog**: Chá»n network interface khi khá»Ÿi Ä‘á»™ng
- **IPv4 filtering**: Chá»‰ hiá»ƒn thá»‹ interfaces cÃ³ IPv4 valid
- **Auto-detection**: Tá»± Ä‘á»™ng detect vÃ  Æ°u tiÃªn interfaces phÃ¹ há»£p

### ğŸŸï¸ Quáº£n lÃ½ Ä‘a sÃ¢n & Ä‘iá»u khiá»ƒn tráº­n Ä‘áº¥u

#### Táº¡o vÃ  quáº£n lÃ½ sÃ¢n
- Tá»‘i Ä‘a **5 sÃ¢n** Ä‘á»“ng thá»i (configurable)
- Má»—i sÃ¢n cÃ³ **PIN 4 chá»¯ sá»‘** unique Ä‘á»ƒ remote access
- Thiáº¿t láº­p loáº¡i tráº­n: **ÄÆ¡n nam/ná»¯, ÄÃ´i nam/ná»¯/mixed**
- Cáº¥u hÃ¬nh sá»‘ vÃ¡n: **Best of 1** hoáº·c **Best of 3**

#### Control Interface cho má»—i sÃ¢n
- Äiá»ƒm sá»‘ real-time vá»›i cÃ¡c nÃºt **+/-** cho tá»«ng bÃªn
- **Äá»•i sÃ¢n** (change ends) vÃ  **reset tráº­n Ä‘áº¥u**
- **VÃ¡n tiáº¿p theo** khi káº¿t thÃºc vÃ¡n
- Hiá»ƒn thá»‹ thÃ´ng tin: tÃªn players/teams, loáº¡i tráº­n, tráº¡ng thÃ¡i

### ğŸŒ Web interface & PIN flow

#### PIN Entry System
- **URL**: `http://[IP]:2345/pin`
- **Input**: Nháº­p PIN 4 chá»¯ sá»‘
- **Validation**: Check PIN cÃ³ tá»“n táº¡i vÃ  active khÃ´ng
- **Redirect**: Chuyá»ƒn Ä‘áº¿n `/scoreboard/{pin}` náº¿u há»£p lá»‡

#### Responsive Scoreboard
- **Mobile-friendly**: Tá»‘i Æ°u cho Ä‘iá»‡n thoáº¡i/tablet
- **Real-time updates**: SSE stream Ä‘á»ƒ Ä‘á»“ng bá»™ Ä‘iá»ƒm sá»‘
- **Touch controls**: NÃºt to, dá»… nháº¥n trÃªn touchscreen
- **Auto-refresh**: Fallback polling náº¿u SSE fail

#### Remote Control Features
- **Score management**: TÄƒng/giáº£m Ä‘iá»ƒm tá»«ng bÃªn
- **Match control**: Äá»•i sÃ¢n, reset, vÃ¡n tiáº¿p theo  
- **Status display**: Hiá»ƒn thá»‹ tráº¡ng thÃ¡i match hiá»‡n táº¡i
- **Error handling**: ThÃ´ng bÃ¡o lá»—i khi action fail

### ğŸ”Œ REST API & SSE

#### Court Management API
```http
GET    /api/court/all                    # Láº¥y danh sÃ¡ch táº¥t cáº£ sÃ¢n
POST   /api/court/create                 # Táº¡o sÃ¢n má»›i
DELETE /api/court/{pin}                  # XÃ³a sÃ¢n
POST   /api/court/{pin}/reset            # Reset tráº­n Ä‘áº¥u
```

#### Scoreboard API  
```http
GET    /api/scoreboard/{pin}             # Láº¥y tráº¡ng thÃ¡i sÃ¢n
POST   /{pin}/increaseA                  # TÄƒng Ä‘iá»ƒm bÃªn A
POST   /{pin}/increaseB                  # TÄƒng Ä‘iá»ƒm bÃªn B  
POST   /{pin}/decreaseA                  # Giáº£m Ä‘iá»ƒm bÃªn A
POST   /{pin}/decreaseB                  # Giáº£m Ä‘iá»ƒm bÃªn B
POST   /{pin}/changeEnds                 # Äá»•i sÃ¢n
POST   /{pin}/nextGame                   # VÃ¡n tiáº¿p theo
```

#### Server-Sent Events (SSE)
```http
GET    /api/sse/scoreboard/{pin}         # SSE stream cho sÃ¢n
GET    /api/sse/courts                   # SSE stream tá»•ng thá»ƒ
```

**SSE Event Types:**
- `score-update`: Cáº­p nháº­t Ä‘iá»ƒm sá»‘
- `match-status`: Thay Ä‘á»•i tráº¡ng thÃ¡i tráº­n Ä‘áº¥u
- `court-created`: SÃ¢n má»›i Ä‘Æ°á»£c táº¡o
- `court-deleted`: SÃ¢n bá»‹ xÃ³a
- `system-status`: Tráº¡ng thÃ¡i há»‡ thá»‘ng

#### Response Format
```json
{
  "success": true,
  "message": "Action completed successfully",
  "data": {
    "pin": "1234",
    "scoreA": 15,
    "scoreB": 12,
    "gameA": 1,
    "gameB": 0,
    "matchType": "MEN_SINGLES",
    "maxGames": 3,
    "status": "PLAYING"
  },
  "timestamp": "2025-10-20T13:45:30"
}
```

### ğŸ—ƒï¸ CÃ¡c mÃ´-Ä‘un dá»¯ liá»‡u/ghi nháº­t kÃ½ (trÃ­ch yáº¿u)

#### Tournament Data Management
- **Tournaments**: Quáº£n lÃ½ thÃ´ng tin giáº£i Ä‘áº¥u
- **Contents**: Ná»™i dung thi Ä‘áº¥u (Ä‘Æ¡n nam, Ä‘Ã´i ná»¯, v.v.)
- **Clubs**: Danh sÃ¡ch cÃ¢u láº¡c bá»™ tham gia
- **Registrations**: ÄÄƒng kÃ½ váº­n Ä‘á»™ng viÃªn theo giáº£i

#### Court & Match Logging
- **Court states**: LÆ°u tráº¡ng thÃ¡i sÃ¢n theo thá»i gian
- **Score history**: Lá»‹ch sá»­ thay Ä‘á»•i Ä‘iá»ƒm sá»‘
- **Match results**: Káº¿t quáº£ tráº­n Ä‘áº¥u hoÃ n táº¥t
- **System events**: Log hoáº¡t Ä‘á»™ng há»‡ thá»‘ng

#### File Storage
- **Screenshots**: Capture mÃ n hÃ¬nh scoreboard
- **Exports**: Xuáº¥t dá»¯ liá»‡u ra file (CSV, JSON)
- **Backups**: Sao lÆ°u dá»¯ liá»‡u Ä‘á»‹nh ká»³
- **Logs**: File log há»‡ thá»‘ng vÃ  error

---

## ğŸ”® Káº¾ HOáº CH TÆ¯Æ NG LAI

### ğŸ”® PhÃ¡t tháº£o tÃ­nh nÄƒng dá»± kiáº¿n

#### ğŸ“‹ TÃ­nh nÄƒng Ä‘Ã£ hoÃ n thÃ nh (v2.0.0)
- âœ… **Quáº£n lÃ½ Ä‘a sÃ¢n**: Há»— trá»£ tá»‘i Ä‘a 5 sÃ¢n Ä‘á»“ng thá»i vá»›i PIN unique
- âœ… **Real-time control**: Desktop + Web interface, SSE streaming
- âœ… **Tournament management**: Giáº£i Ä‘áº¥u, ná»™i dung, cÃ¢u láº¡c bá»™, Ä‘Äƒng kÃ½
- âœ… **H2 TCP Server**: Remote database access cho mÃ¡y khÃ¡c
- âœ… **IPv4 filtering**: Network interface chá»‰ nháº­n IPv4
- âœ… **MSI packaging**: Windows installer vá»›i JRE bundled
- âœ… **Responsive web UI**: Mobile/tablet friendly scoreboard
- âœ… **Multi-display support**: Vertical/horizontal scoreboards

#### ğŸš§ PhiÃªn báº£n 2.1 (Äang lÃªn káº¿ hoáº¡ch)

##### ğŸŒ Quá»‘c táº¿ hoÃ¡ & Báº£o máº­t
- [ ] **Multi-language Support**: 
  - Interface tiáº¿ng Anh/Viá»‡t Nam
  - Localization cho templates vÃ  messages
  - Dynamic language switching
- [ ] **Enhanced Security**:
  - JWT token authentication cho API
  - Role-based access control chi tiáº¿t hÆ¡n
  - PIN encryption vÃ  session management
  - HTTPS support vá»›i SSL certificates

##### â˜ï¸ Cloud & Mobile
- [ ] **Cloud Integration**:
  - Auto backup tournament data lÃªn cloud storage
  - Real-time sync giá»¯a multiple venues
  - Cloud-based tournament analytics
- [ ] **Mobile Applications**:
  - Native Android/iOS companion app
  - Referee mobile app vá»›i offline capability
  - Push notifications cho score updates
  - QR code scanner integration

##### ğŸ“Š Analytics & Reporting
- [ ] **Advanced Analytics**:
  - Match statistics vÃ  performance metrics
  - Player/team performance tracking
  - Tournament trend analysis
  - Export reports (PDF, Excel, CSV)
- [ ] **Tournament Bracket System**:
  - Automated bracket generation
  - Draw management vá»›i seeding
  - Knockout/round-robin tournaments
  - Live bracket updates

#### ğŸ”® PhiÃªn báº£n 3.0 (TÆ°Æ¡ng lai xa)

##### ğŸ—ï¸ Kiáº¿n trÃºc & Scale
- [ ] **Microservices Architecture**:
  - TÃ¡ch thÃ nh services Ä‘á»™c láº­p (Court, Tournament, User, Analytics)
  - API Gateway vÃ  service discovery
  - Docker containerization
  - Kubernetes orchestration
- [ ] **Multi-venue Support**:
  - Sync tournaments across multiple locations
  - Central management dashboard
  - Venue-specific configurations
  - Cross-venue competitions

##### ğŸ¤– AI & Automation
- [ ] **AI-powered Features**:
  - Computer vision auto-scoring
  - Video analysis vÃ  highlight generation
  - Predictive analytics cho match outcomes
  - Smart scheduling optimization
- [ ] **Live Streaming Integration**:
  - Real-time video streaming
  - Multi-camera support
  - Automated highlight clips
  - Social media integration

##### ğŸ¯ Advanced Features
- [ ] **Player Rating System**:
  - ELO-based ranking algorithm
  - Performance tracking over time
  - Skill level assessments
  - Matchmaking recommendations
- [ ] **Sponsor & Commercial**:
  - Advertisement management system
  - Branding customization
  - Revenue tracking
  - Sponsor portal integration

#### ğŸ’¡ Community & Development

##### ğŸ¤ Open Source Contributions
- [ ] **Plugin Architecture**: Extensible system cho custom features
- [ ] **API Documentation**: Comprehensive REST API docs
- [ ] **SDK Development**: Client libraries cho third-party integration
- [ ] **Community Portal**: Feature requests, bug reports, discussions

##### ğŸ§ª Quality & Performance
- [ ] **Testing Suite**: Unit, integration, vÃ  e2e testing
- [ ] **Performance Monitoring**: Real-time performance metrics
- [ ] **Load Testing**: Support cho large-scale tournaments
- [ ] **Accessibility**: WCAG compliance cho web interfaces

### ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng sÆ¡ bá»™

#### ğŸ“‹ Workflow tá»•ng quan há»‡ thá»‘ng

##### ğŸš€ Quy trÃ¬nh khá»Ÿi Ä‘á»™ng (Startup Flow)
```mermaid
graph TD
    A[Khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng] --> B[Chá»n Network Interface IPv4]
    B --> C[Khá»Ÿi Ä‘á»™ng H2 TCP Server]
    C --> D[Káº¿t ná»‘i SQL Server Database]
    D --> E[Load Spring Boot Context]
    E --> F[Hiá»ƒn thá»‹ MainFrame Desktop UI]
    F --> G[ÄÄƒng nháº­p xÃ¡c thá»±c]
    G --> H[Chá»n giáº£i Ä‘áº¥u active]
    H --> I[Sáºµn sÃ ng sá»­ dá»¥ng]
```

##### ğŸ† Quy trÃ¬nh quáº£n lÃ½ giáº£i Ä‘áº¥u (Tournament Management)
```mermaid
graph LR
    A[Táº¡o giáº£i Ä‘áº¥u má»›i] --> B[Thiáº¿t láº­p ná»™i dung thi Ä‘áº¥u]
    B --> C[Quáº£n lÃ½ cÃ¢u láº¡c bá»™]
    C --> D[ÄÄƒng kÃ½ váº­n Ä‘á»™ng viÃªn/Ä‘á»™i]
    D --> E[Táº¡o lá»‹ch thi Ä‘áº¥u]
    E --> F[Báº¯t Ä‘áº§u thi Ä‘áº¥u]
    F --> G[Thu tháº­p káº¿t quáº£]
    G --> H[Xuáº¥t bÃ¡o cÃ¡o]
```

#### ğŸŸï¸ Quy trÃ¬nh quáº£n lÃ½ sÃ¢n thi Ä‘áº¥u

##### ğŸ® Thiáº¿t láº­p vÃ  Ä‘iá»u khiá»ƒn sÃ¢n (Court Management Flow)
```mermaid
sequenceDiagram
    participant Admin as ğŸ‘¨â€ğŸ’¼ Admin Desktop
    participant Court as ğŸŸï¸ Court Manager
    participant Mobile as ğŸ“± Mobile Browser
    participant API as ğŸ”Œ REST API
    participant DB as ğŸ—„ï¸ Database

    Admin->>Court: Táº¡o sÃ¢n má»›i (ID, PIN)
    Court->>DB: LÆ°u thÃ´ng tin sÃ¢n
    Admin->>Court: Thiáº¿t láº­p tráº­n Ä‘áº¥u (ÄÆ¡n/ÄÃ´i, BO1/BO3)
    Admin->>Court: Nháº­p tÃªn cáº§u thá»§/Ä‘á»™i
    Court->>API: Broadcast tráº¡ng thÃ¡i qua SSE
    
    Mobile->>API: GET /pin (nháº­p PIN)
    Mobile->>API: GET /scoreboard/{pin}
    API->>Court: Validate PIN
    Court-->>Mobile: Hiá»ƒn thá»‹ báº£ng Ä‘iá»ƒm
    
    Mobile->>API: POST /{pin}/increaseA
    API->>Court: Cáº­p nháº­t Ä‘iá»ƒm sá»‘
    Court->>DB: LÆ°u log scoring
    Court->>API: Broadcast update qua SSE
    API-->>Mobile: Real-time score update
    API-->>Admin: Desktop UI update
```

##### ğŸ“Š Chu trÃ¬nh thi Ä‘áº¥u (Match Lifecycle)
```mermaid
stateDiagram-v2
    [*] --> Setup: Táº¡o sÃ¢n má»›i
    Setup --> Ready: Thiáº¿t láº­p hoÃ n táº¥t
    Ready --> Playing: Báº¯t Ä‘áº§u thi Ä‘áº¥u
    Playing --> GameFinished: Káº¿t thÃºc vÃ¡n
    GameFinished --> Playing: VÃ¡n tiáº¿p theo
    GameFinished --> MatchFinished: Háº¿t cÃ¡c vÃ¡n
    Playing --> Paused: Táº¡m dá»«ng
    Paused --> Playing: Tiáº¿p tá»¥c
    MatchFinished --> Setup: Reset/Tráº­n má»›i
    
    Playing --> Playing: +/- Ä‘iá»ƒm sá»‘
    Playing --> Playing: Äá»•i sÃ¢n/server
```

#### ğŸŒ Luá»“ng Web Interface

##### ğŸ“± Quy trÃ¬nh Ä‘iá»u khiá»ƒn tá»« xa (Remote Control Flow)
```mermaid
graph TD
    A[Truy cáº­p IP:2345/pin] --> B[Nháº­p PIN 4 chá»¯ sá»‘]
    B --> C{PIN há»£p lá»‡?}
    C -->|KhÃ´ng| D[Hiá»ƒn thá»‹ lá»—i]
    C -->|CÃ³| E[Redirect /scoreboard/PIN]
    E --> F[Load giao diá»‡n báº£ng Ä‘iá»ƒm]
    F --> G[Káº¿t ná»‘i SSE stream]
    G --> H[Sáºµn sÃ ng Ä‘iá»u khiá»ƒn]
    
    H --> I[TÄƒng/giáº£m Ä‘iá»ƒm]
    H --> J[Reset tráº­n Ä‘áº¥u] 
    H --> K[Äá»•i sÃ¢n/server]
    H --> L[VÃ¡n tiáº¿p theo]
    
    I --> M[Gá»­i API request]
    J --> M
    K --> M  
    L --> M
    M --> N[Cáº­p nháº­t real-time via SSE]
    N --> H
```

#### ğŸ”„ Luá»“ng dá»¯ liá»‡u (Data Flow)

##### ğŸ’¾ Luá»“ng lÆ°u trá»¯ vÃ  Ä‘á»“ng bá»™ (Data Sync Flow)
```mermaid
graph LR
    subgraph "Desktop Application"
        A[Java Swing UI] 
        B[Spring Boot Core]
        C[JPA/Hibernate]
    end
    
    subgraph "Web Interface" 
        D[Thymeleaf Templates]
        E[REST API Controllers]
        F[SSE Broadcasting]
    end
    
    subgraph "Database Layer"
        G[SQL Server Primary]
        H[H2 TCP Server]
        I[Local File Storage]
    end
    
    subgraph "External Devices"
        J[Mobile Browsers]
        K[Remote H2 Clients]
        L[Network Display]
    end
    
    A <--> B
    B <--> C
    C <--> G
    B <--> H
    
    B <--> E
    E <--> D
    E <--> F
    F <--> J
    
    K <--> H
    L <--> F
    
    B --> I
```

#### ğŸ”§ Luá»“ng setup vÃ  deployment

##### ğŸ“¦ Quy trÃ¬nh triá»ƒn khai (Deployment Process)
```mermaid
graph TD
    A[Development] --> B[Maven Build]
    B --> C[Unit Testing]
    C --> D[Package JAR]
    D --> E[JPackage MSI Creation]
    E --> F[MSI Distribution]
    
    F --> G[Install on Target Machine]
    G --> H[Configure Database Connection]
    H --> I[Setup Network Interfaces]
    I --> J[Start Application]
    
    J --> K{First Run?}
    K -->|Yes| L[Initialize Database Schema]
    K -->|No| M[Load Existing Data]
    L --> N[Ready for Use]
    M --> N
```

##### ğŸŒ Network Architecture Flow
```mermaid
graph TD
    subgraph "Server Machine"
        A[BTMS Application<br/>Port 2345]
        B[H2 TCP Server<br/>Port 9092] 
        C[SQL Server<br/>Port 1433]
    end
    
    subgraph "LAN Network"
        D[Admin Desktop<br/>192.168.1.100]
        E[Mobile Device<br/>192.168.1.101]
        F[Tablet<br/>192.168.1.102]
        G[Remote H2 Client<br/>192.168.1.103]
    end
    
    subgraph "Display Devices"
        H[Scoreboard Display 1]
        I[Scoreboard Display 2]
        J[Monitor Display]
    end
    
    D --> A
    E --> A
    F --> A
    G --> B
    A --> C
    
    A -.->|UDP Multicast<br/>239.255.50.50:50505| H
    A -.->|UDP Multicast| I
    A -.->|SSE Stream| J
```

#### âš¡ Performance & Monitoring Flow

##### ğŸ“ˆ Luá»“ng giÃ¡m sÃ¡t hiá»‡u nÄƒng
```mermaid
graph LR
    A[Application Metrics] --> B[Resource Monitor]
    B --> C[Memory Usage<br/>Status Bar]
    A --> D[Database Pool<br/>HikariCP]
    A --> E[SSE Connections<br/>Thread Pool]
    
    F[Court Status] --> G[MonitorTab<br/>Real-time View]
    F --> H[Screenshot<br/>Archive]
    F --> I[Log System<br/>Audit Trail]
    
    J[Network Traffic] --> K[UDP Multicast<br/>Monitoring]
    J --> L[HTTP Requests<br/>REST API]
    
    B --> M[Performance<br/>Alerts]
    G --> M
    I --> M
```

---

## ğŸ”§ Váº¬N HÃ€NH & Báº¢O TRÃŒ

### ğŸ§ª Kiá»ƒm thá»­ & giÃ¡m sÃ¡t

#### Testing Strategy
- **Unit Tests**: JUnit cho logic core
- **Integration Tests**: Spring Boot Test cho API
- **Manual Testing**: UI testing cho desktop components
- **Performance Testing**: Load testing cho concurrent users

#### Monitoring & Logging
- **Application Logging**: SLF4J + Logback
- **Performance Metrics**: Memory usage hiá»ƒn thá»‹ trÃªn status bar
- **Error Tracking**: Exception logging vÃ  user notification
- **System Health**: Database connection status, SSE connection count

### ğŸ”’ Báº£o máº­t & quyá»n truy cáº­p

#### Current Security Measures
- **PIN-based Access**: 4-digit PIN cho má»—i sÃ¢n
- **Local Network**: Chá»‰ cháº¡y trÃªn LAN, khÃ´ng expose ra internet
- **Input Validation**: Validate táº¥t cáº£ API inputs
- **Session Management**: Temporary sessions cho web interface

#### Security Considerations
- **No Authentication**: ChÆ°a cÃ³ user authentication system
- **PIN Enumeration**: 4-digit PIN cÃ³ thá»ƒ bá»‹ brute force
- **HTTP Only**: ChÆ°a há»— trá»£ HTTPS
- **Database Security**: SQL injection protection qua JPA

### âš¡ Hiá»‡u nÄƒng & tá»‘i Æ°u

#### Performance Optimizations
- **Connection Pooling**: HikariCP cho database connections
- **Lazy Loading**: JPA lazy loading cho entities
- **Static Resource Caching**: Browser caching cho CSS/JS
- **SSE Efficiency**: Event-driven updates thay vÃ¬ polling

#### Resource Management
- **Memory Usage**: Monitor vÃ  display trÃªn status bar
- **Thread Management**: Controlled thread pools cho SSE
- **Database Optimization**: Proper indexing vÃ  query optimization
- **Garbage Collection**: JVM tuning cho desktop performance

### ğŸ“¦ ÄÃ³ng gÃ³i & cÃ i Ä‘áº·t (Windows MSI)

#### JPackage Configuration
- **Runtime**: Bundle JRE 17 vá»›i application
- **MSI Installer**: Windows native installer
- **Auto-updater**: Future plan cho automatic updates
- **System Integration**: Desktop shortcuts, Start menu entries

#### Installation Process
- **Pre-requisites**: Windows 10/11 64-bit
- **Database Setup**: User cáº§n setup SQL Server trÆ°á»›c
- **Network Configuration**: Auto-detect network interfaces
- **First Run**: Configuration wizard cho database connection

### ğŸ§­ HÆ°á»›ng dáº«n váº­n hÃ nh nhanh

#### Quick Start Guide
1. **CÃ i Ä‘áº·t**: Cháº¡y MSI installer
2. **Database**: Thiáº¿t láº­p SQL Server connection
3. **Network**: Chá»n network interface IPv4
4. **Tournament**: Táº¡o giáº£i Ä‘áº¥u vÃ  ná»™i dung thi Ä‘áº¥u
5. **Courts**: Táº¡o sÃ¢n vá»›i PIN vÃ  báº¯t Ä‘áº§u thi Ä‘áº¥u

#### Daily Operations
- **Táº¡o sÃ¢n má»›i**: Chá»n loáº¡i tráº­n, nháº­p tÃªn players, generate PIN
- **Remote control**: Share PIN vá»›i users Ä‘á»ƒ Ä‘iá»u khiá»ƒn tá»« mobile
- **Monitoring**: Tab "GiÃ¡m sÃ¡t" Ä‘á»ƒ theo dÃµi táº¥t cáº£ sÃ¢n
- **Results**: Tab "Káº¿t quáº£ Ä‘Ã£ thi Ä‘áº¥u" Ä‘á»ƒ xem áº£nh chá»¥p/snapshot

#### Troubleshooting
- **Connection Issues**: Check network interface vÃ  firewall
- **Database Problems**: Verify SQL Server connection string
- **Performance**: Monitor memory usage vÃ  restart náº¿u cáº§n
- **SSE Issues**: Fallback to polling mode tá»± Ä‘á»™ng

---

## ğŸ“Š Káº¿t luáº­n

**Badminton Tournament Management System v2.0.0** lÃ  má»™t há»‡ thá»‘ng hoÃ n chá»‰nh vÃ  máº¡nh máº½ cho viá»‡c quáº£n lÃ½ giáº£i cáº§u lÃ´ng Ä‘a sÃ¢n. Vá»›i kiáº¿n trÃºc hybrid desktop/web, há»‡ thá»‘ng cung cáº¥p:

### âœ… Äiá»ƒm máº¡nh hiá»‡n táº¡i
- **Multi-court Management**: Quáº£n lÃ½ tá»‘i Ä‘a 5 sÃ¢n Ä‘á»“ng thá»i
- **Real-time Control**: Desktop vÃ  mobile interface vá»›i SSE
- **Cross-platform Access**: Web interface cho má»i thiáº¿t bá»‹
- **Professional Deployment**: MSI installer vá»›i JRE bundled
- **Robust Architecture**: Spring Boot + SQL Server + Swing UI

### ğŸš€ Táº§m nhÃ¬n tÆ°Æ¡ng lai
- **v2.1**: Quá»‘c táº¿ hÃ³a, báº£o máº­t nÃ¢ng cao, cloud integration
- **v3.0**: Microservices, AI features, multi-venue support
- **Community**: Open source contributions vÃ  plugin ecosystem

### ğŸ¯ GiÃ¡ trá»‹ cá»‘t lÃµi
Há»‡ thá»‘ng khÃ´ng chá»‰ lÃ  má»™t cÃ´ng cá»¥ quáº£n lÃ½ giáº£i Ä‘áº¥u mÃ  cÃ²n lÃ  ná»n táº£ng cho viá»‡c sá»‘ hÃ³a vÃ  hiá»‡n Ä‘áº¡i hÃ³a cÃ¡c giáº£i cáº§u lÃ´ng, mang láº¡i tráº£i nghiá»‡m tá»‘t nháº¥t cho ban tá»• chá»©c, trá»ng tÃ i vÃ  khÃ¡n giáº£.

---

*BÃ¡o cÃ¡o Ä‘Æ°á»£c táº¡o ngÃ y: 20/10/2025*  
*PhiÃªn báº£n: v2.0.0*  
*TÃ¡c giáº£: Nguyen Viet Hau*