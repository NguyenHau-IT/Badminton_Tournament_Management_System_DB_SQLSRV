<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{fragments/layouts}">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BTMS</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link th:href="@{/css/home/home.css}" href="../../static/css/home/home.css" rel="stylesheet" />
  <link rel="stylesheet" href="/src/main/resources/static/css/home/home.css" />
</head>

<body>
  <div layout:fragment="content">
    <section id="slide-1" class="slide hero">
      <div class="content slide1-content">
        <h1>BTMS</h1>
        <h2>Modern multi-court badminton management</h2>
        <p>Kết hợp ứng dụng desktop và web real-time để điều khiển bảng điểm, cập nhật dữ liệu đa sân, theo dõi giải đấu
          mọi lúc mọi nơi.</p>
        <div class="actions slide1-actions">
          <a href="#slide-3" class="btn-primary slide1-btn1">Khám phá sự kiện</a>
          <a href="#slide-2" class="btn-secondary slide1-btn2">Ứng dụng BTMS</a>
        </div>
      </div>
      <div class="scroll-hint slide1-scroll">
        <i class="bi bi-mouse"></i>
      </div>
    </section>

    <section id="slide-2" class="slide features">
      <div class="content slide2-content">
        <h2>Trải nghiệm sản phẩm BTMS</h2>
        <div class="feature-grid slide2-grid">
          <article class="slide2-article slide2-article1">
            <i class="bi bi-broadcast"></i>
            <h3>Cập nhật real-time</h3>
            <p>Điểm số, trạng thái trận và bảng xếp hạng được đồng bộ tức thì qua SSE và đa thiết bị.</p>
          </article>
          <article class="slide2-article slide2-article2">
            <i class="bi bi-diagram-3"></i>
            <h3>Đa sân thi đấu</h3>
            <p>Quản lý tối đa 5 sân đồng thời, điều khiển theo mã PIN riêng từng sân.</p>
          </article>
          <article class="slide2-article slide2-article3">
            <i class="bi bi-phone"></i>
            <h3>Responsive mọi nền tảng</h3>
            <p>Giao diện tối ưu cho desktop, tablet, smartphone với chế độ sáng/tối.</p>
          </article>
        </div>
        <div class="feature-actions slide2-actions" aria-hidden="false  ">
          <a th:href="@{/product/btms}" href="../product/btms.html" class="btn-primary slide2-btn">Tìm hiểu thêm</a>
        </div>
      </div>
    </section>

    <section id="slide-3" class="slide call-to-action">
      <div class="content slide3-content">
        <h2>Thể thao cầu lông</h2>
        <p>Truy cập bảng điểm trực tiếp, xem chi tiết trận đấu và đăng ký tham gia các giải đấu cầu lông chuyên nghiệp.
        </p>
        <div class="actions slide3-actions">
          <a th:href="@{/badmintonTournament/badmintonTournament}" href="../badmintonTournament/badmintonTournament.html" class="btn-primary slide3-btn1">Khám phá giải đấu</a>
        </div>
      </div>
    </section>
  </div>

  <script>
    (function () {
      const slides = Array.from(document.querySelectorAll('.slide'));
      if (!slides.length) return;

      let currentIndex = 0;
      let animating = false;
      let touchStartY = 0;
      const enableWheel = () => window.innerWidth > 768;

      const updateSlides = (index) => {
        if (index === currentIndex || index < 0 || index >= slides.length) return;
        animating = true;
        currentIndex = index;
        slides.forEach((slide, idx) => slide.classList.toggle('active', idx === currentIndex));
        slides[currentIndex].scrollIntoView({ behavior: 'smooth' });
        document.body.classList.toggle('footer-visible', currentIndex === slides.length - 1);
        setTimeout(() => {
          animating = false;
        }, 1000);
      };

      const handleWheel = (event) => {
        if (!enableWheel()) return;
        event.preventDefault();
        if (animating) return;
        const delta = event.deltaY;
        if (Math.abs(delta) < 15) return;
        const nextIndex = delta > 0 ? currentIndex + 1 : currentIndex - 1;
        updateSlides(Math.max(0, Math.min(slides.length - 1, nextIndex)));
      };

      const handleKey = (event) => {
        if (!enableWheel() || animating) return;
        if (["ArrowDown", "PageDown", " ", "Enter"].includes(event.key)) {
          event.preventDefault();
          updateSlides(Math.min(slides.length - 1, currentIndex + 1));
        } else if (["ArrowUp", "PageUp"].includes(event.key)) {
          event.preventDefault();
          updateSlides(Math.max(0, currentIndex - 1));
        }
      };

      const handleTouchStart = (event) => {
        if (!enableWheel()) return;
        touchStartY = event.changedTouches[0].clientY;
      };

      const handleTouchEnd = (event) => {
        if (!enableWheel() || animating) return;
        const endY = event.changedTouches[0].clientY;
        const diff = touchStartY - endY;
        if (Math.abs(diff) < 40) return;
        updateSlides(diff > 0 ? currentIndex + 1 : currentIndex - 1);
      };

      document.addEventListener('wheel', handleWheel, { passive: false });
      document.addEventListener('keydown', handleKey, { passive: false });
      document.addEventListener('touchstart', handleTouchStart, { passive: true });
      document.addEventListener('touchend', handleTouchEnd, { passive: true });

      document.querySelectorAll('.landing-header nav a').forEach((link, idx) => {
        link.addEventListener('click', (event) => {
          event.preventDefault();
          updateSlides(idx);
        });
      });

      // Support anchors to slides (e.g. <a href="#slide-2">)
      document.querySelectorAll('a[href^="#slide-"]').forEach((link) => {
        link.addEventListener('click', (event) => {
          event.preventDefault();
          const targetId = link.getAttribute('href').slice(1); // remove '#'
          const idx = slides.findIndex(s => s.id === targetId);
          if (idx >= 0) updateSlides(idx);
        });
      });

      slides[0].classList.add('active');
      slides[0].scrollIntoView();
      document.body.classList.toggle('footer-visible', false);
    })();
  </script>
</body>

</html>